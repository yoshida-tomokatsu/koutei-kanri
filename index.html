<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ç¨‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç›´æ¥èª­ã¿è¾¼ã¿ç‰ˆï¼ˆèªè¨¼å¯¾å¿œï¼‰</title>
    
    <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ãƒ¡ã‚¿ã‚¿ã‚° -->
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=()">
    <link rel="stylesheet" href="styles.css">
    <!-- ç®¡ç†è€…æ©Ÿèƒ½ç”¨è¿½åŠ CSS -->
    <style>
        .admin-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-only {
            display: none; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§éè¡¨ç¤º */
        }

        /* ç®¡ç†è€…ãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼åŠ¹æœ */
        .admin-controls .btn-new:hover {
            background-color: #8e44ad !important;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(155, 89, 182, 0.3);
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 1024px) {
            .admin-controls {
                margin-left: 10px;
            }
            
            .admin-controls .btn-new {
                font-size: 10px;
                padding: 4px 8px;
            }
        }

        @media (max-width: 768px) {
            .header-controls {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .admin-controls {
                order: 2;
                width: 100%;
                justify-content: center;
                margin: 10px 0 0 0;
            }
        }
    </style>
</head>
<body>
    <div class="header" style="min-width: 1200px;">
        <h1>å·¥ç¨‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  <span style="font-size: 12px; color: #bdc3c7;">DBç›´æ¥èª­ã¿è¾¼ã¿ç‰ˆ</span></h1>
                  <div class="header-controls" style="min-width: 800px; display: flex; flex-wrap: nowrap; gap: 8px; align-items: center;">
              <!-- æ—¢å­˜ã®ãƒœã‚¿ãƒ³ç¾¤ -->
            <button id="detailSearchBtn" class="btn-detail-search" style="
                background: #3498db;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                font-weight: bold;
                margin-right: 10px;
                display: inline-block;
            ">è©³ç´°æ¤œç´¢</button>
            <div class="view-mode-toggle">
                <button class="view-mode-btn active" data-mode="detailed">è©³ç´°è¡¨ç¤º</button>
                <button class="view-mode-btn" data-mode="simple">ç°¡æ˜“è¡¨ç¤º</button>
            </div>
            <div class="tab-navigation-compact">
                <button class="tab-button-compact active" data-tab="all">ã™ã¹ã¦</button>
                <button class="tab-button-compact" data-tab="in-progress">é€²è¡Œä¸­</button>
                <button class="tab-button-compact" data-tab="completed">å®Œäº†</button>
            </div>
            <!-- ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½ã¯å‰Šé™¤ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å´ã§é™¤å¤–å‡¦ç†æ¸ˆã¿ï¼‰ -->
            
            <!-- ç®¡ç†è€…å°‚ç”¨ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒœã‚¿ãƒ³ï¼ˆJavaScriptã§å‹•çš„ã«é…ç½®ï¼‰ -->
            
            <!-- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çŠ¶æ…‹ã¨ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="database-controls" style="margin-left: 15px; display: flex; gap: 8px; align-items: center;">
                <!-- DBçŠ¶æ…‹è¡¨ç¤º -->
                <div class="db-status-indicator" id="dbStatusIndicator" style="
                    display: flex; 
                    align-items: center; 
                    gap: 5px; 
                    padding: 4px 8px; 
                    border-radius: 4px; 
                    background-color: #95a5a6; 
                    color: white; 
                    font-size: 11px; 
                    font-weight: 500;
                    cursor: pointer;
                " title="DBçŠ¶æ…‹ã®è©³ç´°ã‚’è¡¨ç¤º">
                    <span id="dbStatusIcon">â³</span>
                    <span id="dbStatusText">DBç¢ºèªä¸­</span>
                </div>
                

                
                <!-- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç† -->
                <button class="btn-new" id="clearCacheBtn" style="background-color: #e67e22; font-size: 11px; padding: 4px 8px;" title="ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢" onclick="forceClearCache()">ğŸ—‘ï¸ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢</button>
                
                <!-- DBç¢ºèªãƒœã‚¿ãƒ³ -->
                <button class="btn-new" id="testDbBtn" style="background-color: #3498db; font-size: 11px; padding: 4px 8px;" title="DBæ›¸ãè¾¼ã¿ç¢ºèª" onclick="window.open('db-check.php', '_blank')">ğŸ” DBç¢ºèª</button>
                
                <!-- ã‚«ãƒ†ã‚´ãƒªè‰²ä¿®å¾©ãƒœã‚¿ãƒ³ -->
                <button class="btn-new" style="background-color: #9b59b6; font-size: 11px; padding: 4px 8px;" title="ã‚«ãƒ†ã‚´ãƒªè‰²ã‚’ä¿®å¾©" onclick="window.forceApplyCategoryColors()">ğŸ¨ ã‚«ãƒ†ã‚´ãƒªè‰²ä¿®å¾©</button>
                
                <!-- ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒãƒƒã‚°ãƒœã‚¿ãƒ³ -->
                <button class="btn-new" style="background-color: #34495e; font-size: 11px; padding: 4px 8px;" title="ã‚«ãƒ†ã‚´ãƒªè‰²ãƒ‡ãƒãƒƒã‚°" onclick="window.debugCategoryColors()">ğŸ” ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒãƒƒã‚°</button>
                

            </div>
            
            <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¯JavaScriptã§å‹•çš„ã«è¿½åŠ  -->
        </div>
    </div>
    
    <!-- èªè¨¼ãƒã‚§ãƒƒã‚¯ä¸­ã®åˆæœŸãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ -->
    <div class="auth-loading-overlay" id="authLoadingOverlay" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        z-index: 10000;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', Roboto, Arial, sans-serif;
    ">
        <div style="text-align: center;">
            <div style="
                width: 60px;
                height: 60px;
                border: 4px solid rgba(255,255,255,0.3);
                border-top: 4px solid white;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin: 0 auto 20px;
            "></div>
            <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">ğŸ” èªè¨¼ç¢ºèªä¸­</div>
            <div style="font-size: 14px; opacity: 0.9;">ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ã„ã¾ã™...</div>
        </div>
    </div>
    
    <!-- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çŠ¶æ…‹è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div class="database-status-area" id="databaseStatusArea" style="display: none;">
        <div class="database-status-content">
            <div class="database-status-header">
                <span class="database-status-icon" id="dbStatusIcon">ğŸ”Œ</span>
                <span class="database-status-text" id="dbStatusText">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çŠ¶æ…‹ã‚’ç¢ºèªä¸­...</span>
                <button class="close-status-btn" onclick="closeDatabaseStatus()">Ã—</button>
            </div>
            <div class="database-status-details" id="dbStatusDetails"></div>
        </div>
    </div>
    
    <!-- çµã‚Šè¾¼ã¿è¡¨ç¤ºã‚¨ãƒªã‚¢å‰Šé™¤ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å´ã§é™¤å¤–å‡¦ç†æ¸ˆã¿ï¼‰ -->
    
    <!-- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="upload-modal" id="uploadModal">
        <div class="upload-dialog">
            <div class="upload-header">
                <h3 class="upload-title" id="uploadTitle">ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
                <p class="upload-subtitle" id="uploadSubtitle">æ³¨æ–‡ID: #0001</p>
            </div>
            <div class="upload-content">
                <div class="drag-drop-area" id="dragDropArea">
                    <div class="drag-icon">ğŸ“</div>
                    <div class="drag-message" id="dragMessage">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã“ã“ã«ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—</div>
                    <div class="drag-submessage" id="dragSubmessage">ã¾ãŸã¯ä¸‹ã®ãƒœã‚¿ãƒ³ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</div>
                </div>
                
                <input type="file" id="modalFileInput" style="display: none;">
                
                <div class="upload-buttons">
                    <button class="btn-select-files" onclick="selectFiles()">ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</button>
                    <button class="btn-cancel-upload" onclick="closeUploadModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
                
                <div class="upload-progress" id="uploadProgress">
                    <div class="progress-message" id="progressMessage">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- çµã‚Šè¾¼ã¿ãƒ¢ãƒ¼ãƒ€ãƒ«å‰Šé™¤ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å´ã§é™¤å¤–å‡¦ç†æ¸ˆã¿ï¼‰ -->
    
    <!-- PDFãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="pdf-modal" id="pdfModal">
        <div class="pdf-viewer">
            <div class="pdf-header">
                <div class="pdf-title" id="pdfTitle">ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†</div>
                <div class="pdf-controls">
                    <button class="pdf-close" onclick="closePDFModal()">&times;</button>
                </div>
            </div>
            <div class="pdf-content">
                <div class="file-list" id="fileList">
                    <h3>
                        ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
                        <span class="file-count" id="fileCount">0ä»¶</span>
                    </h3>
                    <div style="font-size: 11px; font-weight: normal; color: #6c757d; margin-bottom: 10px;">
                        ãƒ‰ãƒ©ãƒƒã‚°ã§ä¸¦ã³æ›¿ãˆ
                    </div>
                    <div id="fileListContent">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
                </div>
                <div class="file-viewer" id="fileViewer">
                    <div class="file-navigation" id="fileNavigation">
                        <button class="nav-btn" id="prevBtn" onclick="navigateFile(-1)">â€¹</button>
                        <button class="nav-btn" id="nextBtn" onclick="navigateFile(1)">â€º</button>
                    </div>
                    <div class="file-info-badge" id="fileInfoBadge">1 / 3</div>
                    <div class="pdf-placeholder">
                        <div class="pdf-icon">ğŸ“„</div>
                        <div class="pdf-message">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                        <div class="pdf-info">å·¦ã®ãƒªã‚¹ãƒˆã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤º</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
    <div class="delete-confirm" id="deleteConfirm">
        <div class="delete-dialog">
            <h3>ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤</h3>
            <p id="deleteMessage">ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</p>
            <div class="delete-buttons">
                <button class="btn-delete-confirm" onclick="confirmDelete()">å‰Šé™¤</button>
                <button class="btn-delete-cancel" onclick="cancelDelete()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            </div>
        </div>
    </div>

    <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã¯å‰Šé™¤ï¼ˆå„è¡Œã«å€‹åˆ¥é…ç½®ï¼‰ -->

    <!-- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ -->
    <div class="db-loading-overlay" id="dbLoadingOverlay">
        <div class="db-loading-container">
            <div class="db-loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <div class="db-loading-content">
                <h2 class="db-loading-title">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿ä¸­</h2>
                <p class="db-loading-message" id="dbLoadingMessage">æ¥ç¶šæº–å‚™ä¸­...</p>
                <div class="db-loading-progress">
                    <div class="progress-bar-db">
                        <div class="progress-fill-db" id="dbProgressFill"></div>
                    </div>
                    <div class="progress-percentage" id="dbProgressPercentage">0%</div>
                </div>
                <div class="db-loading-details" id="dbLoadingDetails">
                    <div class="loading-step">
                        <span class="step-icon" id="stepIcon1">â³</span>
                        <span class="step-text" id="stepText1">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šä¸­...</span>
                    </div>
                </div>
                <button class="btn-cancel-loading" id="cancelLoadingBtn" onclick="cancelDatabaseLoading()">
                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </button>
            </div>
        </div>
    </div>
    
    <!-- ã‚·ãƒ³ãƒ—ãƒ«ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="pagination-container" style="
        width: 100%;
        text-align: center;
        padding: 8px 0;
        background-color: #f8f9fa;
        min-width: 1200px;
    ">
        <div class="pagination-wrapper" style="
            display: inline-flex;
            align-items: center;
            gap: 8px;
        ">
            <!-- ç·ä»¶æ•°è¡¨ç¤º -->
            <span class="total-count-info" id="totalCountInfo" style="
                font-size: 14px;
                color: #007bff;
                font-weight: 600;
                margin-right: 15px;
                white-space: nowrap;
                background-color: #e3f2fd;
                padding: 4px 8px;
                border-radius: 4px;
            ">ç·ä»¶æ•°: å–å¾—ä¸­...</span>
            
            <!-- ç¾åœ¨ã®ä»¶æ•°è¡¨ç¤º -->
            <span class="pagination-info" id="paginationInfo" style="
                font-size: 13px;
                color: #495057;
                margin-right: 10px;
                white-space: nowrap;
            ">1-100ä»¶ / 1000ä»¶</span>
            
            <!-- å‰ã¸ãƒœã‚¿ãƒ³ -->
            <button class="pagination-btn" id="prevPageBtn" style="
                background-color: #6c757d;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                min-width: 70px;
                height: 36px;
                transition: all 0.2s ease;
            ">â† å‰ã¸</button>
            
            <!-- ãƒšãƒ¼ã‚¸ç•ªå·ãƒœã‚¿ãƒ³ç¾¤ -->
            <div class="pagination-numbers" id="paginationNumbers" style="
                display: flex;
                gap: 2px;
                align-items: center;
            ">
                <!-- JavaScriptã§å‹•çš„ç”Ÿæˆ -->
            </div>
            
            <!-- æ¬¡ã¸ãƒœã‚¿ãƒ³ -->
            <button class="pagination-btn" id="nextPageBtn" style="
                background-color: #007bff;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                min-width: 70px;
                height: 36px;
                transition: all 0.2s ease;
            ">æ¬¡ã¸ â†’</button>
        </div>
    </div>
    
    <div class="container" style="min-width: 1200px; overflow-x: auto;">
        <!-- è©³ç´°è¡¨ç¤ºãƒ†ãƒ¼ãƒ–ãƒ« -->
        <div class="process-table detailed-view" id="detailedView" style="min-width: 1200px;">
            <table>
                <!-- ãƒ¡ã‚¤ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                <thead>
                    <tr class="table-header">
                        <th rowspan="2" style="width: 60px;">No.</th>
                        <th rowspan="2" style="width: 240px;">æ³¨æ–‡æƒ…å ±</th>
                        <th rowspan="2" style="width: 80px;">ãƒ•ã‚¡ã‚¤ãƒ«</th>
                        <th colspan="4" class="process-order">æ³¨æ–‡å¯¾å¿œ</th>
                        <th colspan="3" class="process-print">ãƒ—ãƒªãƒ³ãƒˆ</th>
                        <th colspan="3" class="process-sewing">ç¸«è£½</th>
                        <th colspan="2" class="process-inspection">æ¤œå“ãƒ»ç™ºé€</th>
                        <th rowspan="2" style="width: 280px;">å‚™è€ƒ</th>
                    </tr>
                    <tr class="process-header">
                        <th>æ³¨æ–‡æ‹…å½“</th>
                        <th>ã‚¤ãƒ¡ãƒ¼ã‚¸é€ä»˜</th>
                        <th>æ”¯æ‰•ã„æ–¹æ³•</th>
                        <th>æ”¯æ‰•ã„å®Œäº†</th>
                        <th>ãƒ—ãƒªãƒ³ãƒˆä¾é ¼æ—¥</th>
                        <th>ãƒ—ãƒªãƒ³ãƒˆå·¥å ´</th>
                        <th>ãƒ—ãƒªãƒ³ãƒˆç´æœŸ</th>
                        <th>ç¸«è£½ä¾é ¼æ—¥</th>
                        <th>ç¸«è£½å·¥å ´</th>
                        <th>ç¸«è£½ç´æœŸ</th>
                        <th>æ¤œå“æ‹…å½“</th>
                        <th>ç™ºé€æ—¥<br>é…é€ä¼šç¤¾</th>
                    </tr>
                </thead>
                
                <!-- ãƒ‡ãƒ¼ã‚¿è¡Œï¼ˆJavaScriptã‹ã‚‰å‹•çš„ç”Ÿæˆï¼‰ -->
                <tbody id="orders-table-body">
                    <tr>
                        <td colspan="16" class="loading">èªè¨¼ç¢ºèªä¸­...</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- ç°¡æ˜“è¡¨ç¤ºãƒ†ãƒ¼ãƒ–ãƒ« -->
        <div class="simple-table-container simple-view" id="simpleView" style="display: none; min-width: 1200px;">
            <div style="padding: 20px; background-color: white; min-width: 1200px;">
                <table class="simple-table" id="simpleTable">
                    <thead>
                        <tr class="simple-header">
                            <th>No.</th>
                            <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                            <th>å•†å“ç¨®åˆ¥</th>
                            <th>æ³¨æ–‡ID</th>
                            <th>ãŠåå‰</th>
                            <th>ä¼šç¤¾å</th>
                            <th>æ³¨æ–‡æ—¥</th>
                            <th>ç´å“æ—¥</th>
                            <th>æ³¨æ–‡æ‹…å½“</th>
                            <th>ã‚¤ãƒ¡ãƒ¼ã‚¸é€ä»˜</th>
                            <th>æ”¯æ‰•ã„æ–¹æ³•</th>
                            <th>æ”¯æ‰•ã„å®Œäº†</th>
                            <th>ãƒ—ãƒªãƒ³ãƒˆä¾é ¼</th>
                            <th>ãƒ—ãƒªãƒ³ãƒˆå·¥å ´</th>
                            <th>ãƒ—ãƒªãƒ³ãƒˆç´æœŸ</th>
                            <th>ç¸«è£½ä¾é ¼</th>
                            <th>ç¸«è£½å·¥å ´</th>
                            <th>ç¸«è£½ç´æœŸ</th>
                            <th>æ¤œå“æ‹…å½“</th>
                            <th>ç™ºé€æ—¥</th>
                            <th>é…é€ä¼šç¤¾</th>
                            <th>å‚™è€ƒ</th>
                        </tr>
                    </thead>
                    <tbody id="simple-table-body">
                        <tr>
                            <td colspan="22" class="loading">èªè¨¼ç¢ºèªä¸­...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!-- è©³ç´°æ¤œç´¢ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="detailSearchModal" class="modal" style="display: none;">
        <div class="modal-content detail-search-modal">
            <div class="modal-header">
                <h2>è©³ç´°æ¤œç´¢</h2>
                <span class="close-modal" onclick="closeDetailSearchModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="search-section">
                    <h3>ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æ¤œç´¢</h3>
                    <div class="search-row">
                        <div class="search-field">
                            <label>æ³¨æ–‡æ‹…å½“</label>
                            <select id="searchOrderHandler" class="search-select">
                                <option value="">ã™ã¹ã¦</option>
                            </select>
                        </div>
                        <div class="search-field">
                            <label>æ”¯æ‰•æ–¹æ³•</label>
                            <select id="searchPaymentMethod" class="search-select">
                                <option value="">ã™ã¹ã¦</option>
                            </select>
                        </div>
                        <div class="search-field">
                            <label>ãƒ—ãƒªãƒ³ãƒˆå·¥å ´</label>
                            <select id="searchPrintFactory" class="search-select">
                                <option value="">ã™ã¹ã¦</option>
                            </select>
                        </div>
                    </div>
                    <div class="search-row">
                        <div class="search-field">
                            <label>ç¸«è£½å·¥å ´</label>
                            <select id="searchSewingFactory" class="search-select">
                                <option value="">ã™ã¹ã¦</option>
                            </select>
                        </div>
                        <div class="search-field">
                            <label>æ¤œå“æ‹…å½“</label>
                            <select id="searchQualityChecker" class="search-select">
                                <option value="">ã™ã¹ã¦</option>
                            </select>
                        </div>
                        <div class="search-field">
                            <label>é…é€ä¼šç¤¾</label>
                            <select id="searchShippingCompany" class="search-select">
                                <option value="">ã™ã¹ã¦</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="search-section">
                    <h3>æ—¥ä»˜æ¤œç´¢</h3>
                    <div class="search-row">
                        <div class="search-field">
                            <label>æ³¨æ–‡æ—¥</label>
                            <input type="date" id="searchOrderDate" class="search-input">
                        </div>
                        <div class="search-field">
                            <label>ç™ºé€æ—¥</label>
                            <input type="date" id="searchShippingDate" class="search-input">
                        </div>
                    </div>
                </div>

                <div class="search-section">
                    <h3>ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢</h3>
                    <div class="search-row">
                        <div class="search-field">
                            <label>æ³¨æ–‡è€…ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰</label>
                            <input type="text" id="searchCustomer" class="search-input" placeholder="æ³¨æ–‡è€…åã‚’å…¥åŠ›">
                        </div>
                        <div class="search-field">
                            <label>ä¼šç¤¾åï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰</label>
                            <input type="text" id="searchCompany" class="search-input" placeholder="ä¼šç¤¾åã‚’å…¥åŠ›">
                        </div>
                    </div>
                </div>

                <div class="search-section">
                    <h3>ãã®ä»–ã®æ¡ä»¶</h3>
                    <div class="search-row">
                        <div class="search-field">
                            <label>åˆ¶ä½œäº‹ä¾‹æ²è¼‰è¨±å¯</label>
                            <select id="searchPublicationPermission" class="search-select">
                                <option value="">ã™ã¹ã¦</option>
                                <option value="ã—ãªã„">ã—ãªã„</option>
                                <option value="ã™ã‚‹">ã™ã‚‹</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="clearDetailSearch()" class="btn-clear">ã‚¯ãƒªã‚¢</button>
                <button onclick="executeDetailSearch()" class="btn-search">æ¤œç´¢å®Ÿè¡Œ</button>
            </div>
        </div>
    </div>
    
    <!-- çµ±åˆç‰ˆJavaScriptãƒ•ã‚¡ã‚¤ãƒ« - é †åºé‡è¦ï¼ˆèªè¨¼æ©Ÿèƒ½è¿½åŠ ï¼‰ -->
    <script src="core.js?v=20250108002245"></script>
    <script src="auth.js?v=20250108002245"></script>
    <script src="ui-modals.js?v=20250108002245"></script>
    <script src="table-manager.js?v=20250108002245"></script>
    <script src="order-save-manager.js?v=20250108002245"></script>
    <script src="file-system.js?v=20250108002245"></script>
    <script src="simple-pdf-viewer.js?v=20250108002245"></script>
    <script src="detail-search.js?v=20250108002245"></script>
    <script src="pdf-auto-sync.js?v=20250108002245"></script>
    <script src="main.js?v=20250108002245"></script>
    
    <!-- èªè¨¼å¯¾å¿œç‰ˆåˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script>
        console.log(`
ğŸš€ å·¥ç¨‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç›´æ¥èª­ã¿è¾¼ã¿ç‰ˆï¼ˆèªè¨¼å¯¾å¿œï¼‰
        
ğŸ“¦ èª­ã¿è¾¼ã¾ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«:
âœ… core.js - åŸºæœ¬è¨­å®šãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ»APIé€šä¿¡
âœ… auth.js - èªè¨¼æ©Ÿèƒ½ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
âœ… ui-modals.js - å…¨ãƒ¢ãƒ¼ãƒ€ãƒ«æ©Ÿèƒ½ 
âœ… table-manager.js - ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºãƒ»åˆ‡ã‚Šæ›¿ãˆãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
âœ… file-system.js - ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆDBå°‚ç”¨ç‰ˆï¼‰
âœ… main.js - ãƒ¡ã‚¤ãƒ³å‡¦ç†ãƒ»åˆæœŸåŒ–ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ï¼ˆDBç›´æ¥èª­ã¿è¾¼ã¿ç‰ˆï¼‰

ğŸ” æ–°æ©Ÿèƒ½ï¼ˆèªè¨¼å¯¾å¿œï¼‰:
- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«ã‚ˆã‚‹èªè¨¼
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»è‡ªå‹•ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- ç®¡ç†è€…ãƒ»å¾“æ¥­å“¡ã®æ¨©é™ç®¡ç†
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ï¼ˆè©¦è¡Œå›æ•°åˆ¶é™ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³å›ºå®šåŒ–å¯¾ç­–ï¼‰
- è‡ªå‹•ã‚»ãƒƒã‚·ãƒ§ãƒ³ç›£è¦–ãƒ»æœŸé™åˆ‡ã‚Œè­¦å‘Š

ğŸ¯ ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™:
- ç®¡ç†è€…: å…¨æ©Ÿèƒ½åˆ©ç”¨å¯èƒ½
- å¾“æ¥­å“¡ï¼ˆç·¨é›†å¯ï¼‰: ãƒ‡ãƒ¼ã‚¿ç·¨é›†ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œå¯èƒ½
- å¾“æ¥­å“¡ï¼ˆé–²è¦§ã®ã¿ï¼‰: ãƒ‡ãƒ¼ã‚¿é–²è¦§ã®ã¿

ğŸ”§ ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰:
- getCurrentUser() - ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
- hasPermission('edit') - æ¨©é™ãƒã‚§ãƒƒã‚¯
- isAdmin() - ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯
- handleLogout() - æ‰‹å‹•ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
        `);

        // PDFè‡ªå‹•åŒæœŸè¨­å®š
        window.PDF_AUTO_SYNC_CONFIG = {
            checkInterval: 30000,     // ãƒã‚§ãƒƒã‚¯é–“éš”ï¼ˆãƒŸãƒªç§’ï¼‰
            enableAutoSync: true,     // è‡ªå‹•åŒæœŸã®æœ‰åŠ¹/ç„¡åŠ¹
            debug: false             // ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã®æœ‰åŠ¹/ç„¡åŠ¹
        };

        // èªè¨¼å¯¾å¿œç‰ˆåˆæœŸåŒ–å‡¦ç†ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸ“„ DOMèª­ã¿è¾¼ã¿å®Œäº† - èªè¨¼å¯¾å¿œç‰ˆï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰ã§èµ·å‹•');
            
            try {
                // åˆæœŸãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’è¡¨ç¤º
                const authLoadingOverlay = document.getElementById('authLoadingOverlay');
                
                // 1. èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
                console.log('ğŸ” èªè¨¼çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯é–‹å§‹...');
                const isAuthenticated = await checkAuthenticationOnLoad();
                
                if (!isAuthenticated) {
                    console.log('âŒ èªè¨¼å¤±æ•— - ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ');
                    return; // ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã®ã§å‡¦ç†çµ‚äº†
                }
                
                console.log('âœ… èªè¨¼æˆåŠŸ - ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–é–‹å§‹');
                
                // 2. èªè¨¼ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’éè¡¨ç¤º
                if (authLoadingOverlay) {
                    authLoadingOverlay.style.display = 'none';
                }
                
                // 3. PDFè‡ªå‹•åŒæœŸã‚·ã‚¹ãƒ†ãƒ ã‚’åˆæœŸåŒ–
                console.log('ğŸ“ PDFè‡ªå‹•åŒæœŸã‚·ã‚¹ãƒ†ãƒ ã‚’åˆæœŸåŒ–ä¸­...');
                window.pdfAutoSync = new PDFAutoSync(window.PDF_AUTO_SYNC_CONFIG);
                
                // 4. æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’åˆæœŸåŒ–
                setTimeout(() => {
                    initializeDatabaseControls();
                }, 500);
                
                // 5. å€‹åˆ¥è¡Œç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã‚’åˆæœŸåŒ–ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«æ§‹ç¯‰å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹ï¼‰
                
                // 6. ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œãƒ¡ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆæœŸåŒ–
                console.log('ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿é–‹å§‹...');
                
                // èª­ã¿è¾¼ã¿çŠ¶æ…‹ã‚’è¡¨ç¤ºï¼ˆä¸¡æ–¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ›´æ–°ï¼‰
                const ordersTableBody = document.getElementById('orders-table-body');
                const simpleTableBody = document.getElementById('simple-table-body');
                
                if (ordersTableBody) {
                    ordersTableBody.innerHTML = '<tr><td colspan="16" class="loading">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</td></tr>';
                }
                if (simpleTableBody) {
                    simpleTableBody.innerHTML = '<tr><td colspan="22" class="loading">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</td></tr>';
                }
                
                // æœ¬ç•ªç’°å¢ƒç”¨ï¼šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä»˜ãã§ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
                try {
                    const loadPromise = loadOrdersFromData();
                    const timeoutPromise = new Promise((_, reject) => {
                        setTimeout(() => reject(new Error('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆ30ç§’ï¼‰')), 30000);
                    });
                    
                    await Promise.race([loadPromise, timeoutPromise]);
                    console.log('âœ… ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†');
                    
                } catch (loadError) {
                    console.error('âŒ ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', loadError);
                    
                    // ç·Šæ€¥ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§è¡¨ç¤ºã‚’ç¶™ç¶š
                    console.log('ğŸ†˜ ç·Šæ€¥ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§è¡¨ç¤ºç¶™ç¶š');
                    
                    // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š
                    if (typeof SAMPLE_ORDERS !== 'undefined' && SAMPLE_ORDERS.length > 0) {
                        window.ordersData = SAMPLE_ORDERS;
                        console.log('ğŸ“Š ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š:', SAMPLE_ORDERS.length, 'ä»¶');
                        
                        // ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ§‹ç¯‰
                        if (typeof buildOrdersTable === 'function') {
                            buildOrdersTable();
                        }
                        if (typeof buildSimpleTable === 'function') {
                            buildSimpleTable();
                        }
                        
                        // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
                        if (typeof initializePagination === 'function') {
                            initializePagination(SAMPLE_ORDERS.length);
                        }
                        
                        // ä¸€æ™‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆã§ã¯ãªãï¼‰
                        if (typeof showTemporaryMessage === 'function') {
                            showTemporaryMessage('âš ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼ã®ãŸã‚ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§è¡¨ç¤ºä¸­', 'warning', 5000);
                        }
                        
                    } else {
                        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚‚ç„¡ã„å ´åˆã¯æœ€å°é™ã®è¡¨ç¤º
                        const errorMessage = `
                            <tr>
                                <td colspan="16" style="text-align: center; padding: 40px; color: #e74c3c;">
                                    <div style="font-size: 18px; margin-bottom: 10px;">âš ï¸ ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼</div>
                                    <div style="font-size: 14px; margin-bottom: 15px;">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ¥ç¶šã§ãã¾ã›ã‚“</div>
                                    <button onclick="window.location.reload()" style="
                                        background-color: #007bff; color: white; border: none; 
                                        padding: 8px 16px; border-radius: 4px; cursor: pointer;
                                    ">ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿</button>
                                </td>
                            </tr>
                        `;
                        
                        if (ordersTableBody) {
                            ordersTableBody.innerHTML = errorMessage;
                        }
                        if (simpleTableBody) {
                            simpleTableBody.innerHTML = errorMessage.replace('colspan="16"', 'colspan="22"');
                        }
                    }
                    
                    // ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è©³ç´°æƒ…å ±ã‚’å‡ºåŠ›
                    console.log('ğŸ” ãƒ‡ãƒãƒƒã‚°æƒ…å ±:', {
                        userAgent: navigator.userAgent,
                        url: window.location.href,
                        timestamp: new Date().toISOString(),
                        error: loadError,
                        hasSampleData: typeof SAMPLE_ORDERS !== 'undefined',
                        sampleDataLength: typeof SAMPLE_ORDERS !== 'undefined' ? SAMPLE_ORDERS.length : 0
                    });
                }
                
                console.log('âœ… å…¨åˆæœŸåŒ–å‡¦ç†å®Œäº† - ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œã‚·ã‚¹ãƒ†ãƒ æº–å‚™å®Œäº†ï¼');
                
                // æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šãƒ†ãƒ¼ãƒ–ãƒ«ãŒç©ºã®å ´åˆã¯æœ€ä½é™ã®æ§‹é€ ã‚’è¡¨ç¤º
                setTimeout(() => {
                    const ordersTableBody = document.getElementById('orders-table-body');
                    const simpleTableBody = document.getElementById('simple-table-body');
                    
                    if (ordersTableBody && (!ordersTableBody.innerHTML || ordersTableBody.innerHTML.trim() === '')) {
                        ordersTableBody.innerHTML = '<tr><td colspan="16" style="text-align: center; padding: 20px; color: #666;">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™...</td></tr>';
                        console.log('ğŸ”§ è©³ç´°ãƒ†ãƒ¼ãƒ–ãƒ«ã«æœ€ä½é™ã®æ§‹é€ ã‚’è¨­å®š');
                    }
                    
                    if (simpleTableBody && (!simpleTableBody.innerHTML || simpleTableBody.innerHTML.trim() === '')) {
                        simpleTableBody.innerHTML = '<tr><td colspan="22" style="text-align: center; padding: 20px; color: #666;">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™...</td></tr>';
                        console.log('ğŸ”§ ç°¡æ˜“ãƒ†ãƒ¼ãƒ–ãƒ«ã«æœ€ä½é™ã®æ§‹é€ ã‚’è¨­å®š');
                    }
                    
                    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’åˆæœŸåŒ–
                    if (typeof initializeAllEvents === 'function') {
                        initializeAllEvents();
                    }
                    if (typeof initializeViewModeEvents === 'function') {
                        initializeViewModeEvents();
                    }
                    if (typeof initializeTabEvents === 'function') {
                        initializeTabEvents();
                    }
                }, 1000);
                
            } catch (error) {
                console.error('âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                
                // ã‚¨ãƒ©ãƒ¼æ™‚ã¯èªè¨¼ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’æ›´æ–°
                const authLoadingOverlay = document.getElementById('authLoadingOverlay');
                if (authLoadingOverlay) {
                    authLoadingOverlay.innerHTML = `
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 20px;">âŒ</div>
                            <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼</div>
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 20px;">${error.message}</div>
                            <button onclick="window.location.reload()" style="
                                background-color: white;
                                color: #667eea;
                                border: none;
                                padding: 10px 20px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: 600;
                            ">ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿</button>
                        </div>
                    `;
                }
                
                // ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚’ã‚ˆã‚Šè©³ç´°ã«
                const tbody = document.getElementById('orders-table-body');
                const simpleTableBody = document.getElementById('simple-table-body');
                
                const errorMessage = '<tr><td colspan="22" class="loading" style="color: red;">ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message + '<br/>ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</td></tr>';
                
                if (tbody) {
                    tbody.innerHTML = errorMessage;
                }
                if (simpleTableBody) {
                    simpleTableBody.innerHTML = errorMessage;
                }
            }
        });
        
        // PDFè‡ªå‹•åŒæœŸç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        function refreshCurrentOrderFiles() {
            // ç¾åœ¨è¡¨ç¤ºä¸­ã®æ³¨æ–‡ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’æ›´æ–°
            if (window.currentOrderId && window.loadFileList) {
                console.log('ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’æ›´æ–°ä¸­...', window.currentOrderId);
                window.loadFileList();
            }
        }

        // PDFè‡ªå‹•åŒæœŸã®æ‰‹å‹•å®Ÿè¡Œé–¢æ•°ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
        window.forcePDFSync = async function() {
            if (window.pdfAutoSync) {
                console.log('ğŸ“ PDFå¼·åˆ¶åŒæœŸã‚’å®Ÿè¡Œä¸­...');
                const result = await window.pdfAutoSync.forcSync();
                console.log('ğŸ“ PDFå¼·åˆ¶åŒæœŸçµæœ:', result);
                return result;
            } else {
                console.error('ğŸ“ PDFè‡ªå‹•åŒæœŸã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                return null;
            }
        };

        // PDFåŒæœŸçŠ¶æ…‹ã®ç¢ºèªé–¢æ•°ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
        window.checkPDFSyncStatus = async function() {
            if (window.pdfAutoSync) {
                const status = window.pdfAutoSync.getSyncStatus();
                console.log('ğŸ“ PDFåŒæœŸçŠ¶æ…‹:', status);
                return status;
            } else {
                console.error('ğŸ“ PDFè‡ªå‹•åŒæœŸã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                return null;
            }
        };
        
        // æœ¬ç•ªç’°å¢ƒç”¨ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰
        window.debugProduction = {
            // APIæ¥ç¶šãƒ†ã‚¹ãƒˆ
            testAPI: async function() {
                console.log('ğŸŒ æœ¬ç•ªç’°å¢ƒAPIæ¥ç¶šãƒ†ã‚¹ãƒˆé–‹å§‹...');
                try {
                    const response = await fetch('./order-updates-api.php?action=get_orders&limit=1&page=1');
                    const result = await response.json();
                    console.log('âœ… APIæ¥ç¶šæˆåŠŸ:', result);
                    return result;
                } catch (error) {
                    console.error('âŒ APIæ¥ç¶šã‚¨ãƒ©ãƒ¼:', error);
                    return { error: error.message };
                }
            },
            
            // å¼·åˆ¶ãƒ‡ãƒ¼ã‚¿å†èª­ã¿è¾¼ã¿
            forceReload: async function() {
                console.log('ğŸ”„ å¼·åˆ¶ãƒ‡ãƒ¼ã‚¿å†èª­ã¿è¾¼ã¿é–‹å§‹...');
                const simpleTableBody = document.getElementById('simple-table-body');
                if (simpleTableBody) {
                    simpleTableBody.innerHTML = '<tr><td colspan="22" class="loading">å¼·åˆ¶å†èª­ã¿è¾¼ã¿ä¸­...</td></tr>';
                }
                
                try {
                    await loadOrdersFromData();
                    console.log('âœ… å¼·åˆ¶å†èª­ã¿è¾¼ã¿å®Œäº†');
                } catch (error) {
                    console.error('âŒ å¼·åˆ¶å†èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                }
            },
            
            // ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèª
            checkStatus: function() {
                console.log('ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹:', {
                    èªè¨¼æ¸ˆã¿: !!window.currentUser,
                    ãƒ¦ãƒ¼ã‚¶ãƒ¼: window.currentUser?.name,
                    ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: window.ordersData?.length,
                    ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³: window.paginationState,
                    ã‚­ãƒ£ãƒƒã‚·ãƒ¥: window.dataCache?.getStats()
                });
            }
        };
        
        console.log('ğŸ”§ æœ¬ç•ªç’°å¢ƒãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰åˆ©ç”¨å¯èƒ½:');
        console.log('- debugProduction.testAPI() - APIæ¥ç¶šãƒ†ã‚¹ãƒˆ');
        console.log('- debugProduction.forceReload() - å¼·åˆ¶ãƒ‡ãƒ¼ã‚¿å†èª­ã¿è¾¼ã¿');
        console.log('- debugProduction.checkStatus() - ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèª');
        
        // ç·¨é›†ãƒœã‚¿ãƒ³ä¿®æ­£ç”¨ã®ç·Šæ€¥ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ›´æ–°ç‰ˆ - 2025-07-03 00:18ï¼‰
        window.emergencyFixEditButtons = function() {
            console.log('ğŸ†˜ ç·¨é›†ãƒœã‚¿ãƒ³ç·Šæ€¥ä¿®æ­£é–‹å§‹ - æœ€æ–°ç‰ˆ');
            
            // 1. æ—¢å­˜ã®è¡Œã«ç·¨é›†ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
            const rows = document.querySelectorAll('.order-row');
            console.log('ğŸ” ç™ºè¦‹ã—ãŸè¡Œæ•°:', rows.length);
            
            if (rows.length === 0) {
                console.warn('âš ï¸ æ³¨æ–‡è¡ŒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚');
                alert('æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            let buttonCount = 0;
            rows.forEach((row, index) => {
                const publicationDiv = row.querySelector('.publication-permission');
                if (publicationDiv) {
                    // æ—¢å­˜ã®ç·¨é›†ãƒœã‚¿ãƒ³ã‚’å‰Šé™¤
                    const existingBtn = publicationDiv.querySelector('.edit-btn');
                    if (existingBtn) {
                        existingBtn.remove();
                        console.log(`ğŸ—‘ï¸ æ—¢å­˜ã®ç·¨é›†ãƒœã‚¿ãƒ³ã‚’å‰Šé™¤ [${index}]`);
                    }
                    
                    // æ³¨æ–‡IDã‚’å–å¾—
                    const orderNumberElement = row.querySelector('.order-number');
                    const orderId = orderNumberElement ? orderNumberElement.textContent.replace('æ³¨æ–‡IDï¼š', '').trim() : `#${index + 1}`;
                    
                    // æ–°ã—ã„ç·¨é›†ãƒœã‚¿ãƒ³ã‚’ä½œæˆ
                    const editBtn = document.createElement('button');
                    editBtn.className = 'edit-btn emergency-edit-btn';
                    editBtn.textContent = 'ç·¨é›†';
                    editBtn.style.cssText = `
                        background-color: #28a745 !important;
                        color: white !important;
                        border: 2px solid #000 !important;
                        padding: 6px 12px !important;
                        border-radius: 4px !important;
                        font-size: 13px !important;
                        font-weight: bold !important;
                        cursor: pointer !important;
                        margin-left: 10px !important;
                        flex-shrink: 0 !important;
                        display: inline-block !important;
                        visibility: visible !important;
                        opacity: 1 !important;
                        min-width: 60px !important;
                        text-align: center !important;
                        z-index: 9999 !important;
                        position: relative !important;
                    `;
                    
                    // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
                    editBtn.addEventListener('click', function() {
                        console.log('ğŸ‰ ãƒ†ã‚¹ãƒˆç·¨é›†ãƒœã‚¿ãƒ³å‹•ä½œç¢ºèªæˆåŠŸï¼æœ€æ–°ç‰ˆã®ãƒœã‚¿ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚');
                        console.log('âœ… ç·¨é›†ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ:', orderId);
                        
                        // å®Ÿéš›ã®ç·¨é›†æ©Ÿèƒ½ã‚’å‘¼ã³å‡ºã—ï¼ˆåˆ©ç”¨å¯èƒ½ãªå ´åˆï¼‰
                        if (window.toggleRowEditMode) {
                            window.toggleRowEditMode(orderId);
                        }
                    });
                    
                    // ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
                    publicationDiv.appendChild(editBtn);
                    buttonCount++;
                    console.log(`âœ… ç·¨é›†ãƒœã‚¿ãƒ³ã‚’è¿½åŠ  [${index}]:`, orderId);
                } else {
                    console.warn(`âš ï¸ publication-permissionè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ [${index}]`);
                }
            });
            
            console.log(`âœ… ç·¨é›†ãƒœã‚¿ãƒ³ç·Šæ€¥ä¿®æ­£å®Œäº†: ${buttonCount}å€‹ã®ãƒœã‚¿ãƒ³ã‚’è¿½åŠ `);
            
            // çµæœç¢ºèª
            setTimeout(() => {
                const totalButtons = document.querySelectorAll('.edit-btn').length;
                console.log('ğŸ” ä¿®æ­£å¾Œã®ç·¨é›†ãƒœã‚¿ãƒ³æ•°:', totalButtons);
                alert(`âœ… ç·¨é›†ãƒœã‚¿ãƒ³ä¿®æ­£å®Œäº†\n\nè¿½åŠ ã•ã‚ŒãŸãƒœã‚¿ãƒ³æ•°: ${buttonCount}å€‹\nç¾åœ¨ã®ç·ãƒœã‚¿ãƒ³æ•°: ${totalButtons}å€‹`);
            }, 100);
        };
        
        // æœ€æ–°ã®çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
        window.emergencyCheckStatus = function() {
            console.log('ğŸ” ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ - æœ€æ–°ç‰ˆ');
            
            const status = {
                ordersData: window.ordersData?.length || 0,
                orderRows: document.querySelectorAll('.order-row').length,
                editButtons: document.querySelectorAll('.edit-btn').length,
                tableBody: !!document.getElementById('orders-table-body'),
                mainJsLoaded: typeof loadOrdersFromData !== 'undefined',
                tableManagerLoaded: typeof buildOrdersTable !== 'undefined'
            };
            
            console.log('ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹:', status);
            
            const statusMessage = `
ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ãƒ¬ãƒãƒ¼ãƒˆ:
â€¢ ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: ${status.ordersData}ä»¶
â€¢ è¡¨ç¤ºè¡Œæ•°: ${status.orderRows}è¡Œ
â€¢ ç·¨é›†ãƒœã‚¿ãƒ³æ•°: ${status.editButtons}å€‹
â€¢ ãƒ†ãƒ¼ãƒ–ãƒ«: ${status.tableBody ? 'âœ…' : 'âŒ'}
â€¢ ãƒ¡ã‚¤ãƒ³JS: ${status.mainJsLoaded ? 'âœ…' : 'âŒ'}
â€¢ ãƒ†ãƒ¼ãƒ–ãƒ«ç®¡ç†JS: ${status.tableManagerLoaded ? 'âœ…' : 'âŒ'}
            `;
            
            alert(statusMessage);
            return status;
        };
        
        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§ãƒ†ã‚¹ãƒˆè¡Œã‚’ä½œæˆï¼ˆæ›´æ–°ç‰ˆ - 2025-07-03 00:18ï¼‰
        window.emergencyCreateTestRow = function() {
            console.log('ğŸ§ª ãƒ†ã‚¹ãƒˆè¡Œä½œæˆé–‹å§‹ - æœ€æ–°ç‰ˆ');
            
            const tbody = document.getElementById('orders-table-body');
            if (!tbody) {
                console.error('âŒ ãƒ†ãƒ¼ãƒ–ãƒ«ãƒœãƒ‡ã‚£ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                alert('âŒ ãƒ†ãƒ¼ãƒ–ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚HTMLã®æ§‹é€ ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚');
                return;
            }
            
            // æ—¢å­˜ã®å†…å®¹ã‚’ã‚¯ãƒªã‚¢
            tbody.innerHTML = '';
            console.log('âœ… æ—¢å­˜ã®å†…å®¹ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
            
            // ãƒ†ã‚¹ãƒˆè¡Œã®HTMLã‚’ä½œæˆ
            const testRowHTML = `
                <tr class="order-row" data-order-id="TEST001">
                    <td class="row-number" style="text-align: center; font-weight: bold; font-size: 14px; background-color: #f8f9fa; vertical-align: middle;">1</td>
                    <td class="order-info">
                        <div class="order-header" style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px; flex-wrap: nowrap;">
                            <span class="order-number" style="font-size: 15px; font-weight: bold; color: #2c3e50; white-space: nowrap; flex-shrink: 0;">æ³¨æ–‡IDï¼š#TEST001</span>
                            <span style="color: #7f8c8d; flex-shrink: 0;">ï½œ</span>
                            <select class="category-dropdown" style="font-size: 14px; flex: 1; min-width: 0;">
                                <option value="ãƒãƒªã‚¨ã‚¹ãƒ†ãƒ« ã‚¹ã‚«ãƒ¼ãƒ•" selected>ãƒãƒªã‚¨ã‚¹ãƒ†ãƒ« ã‚¹ã‚«ãƒ¼ãƒ•</option>
                            </select>
                        </div>
                        <div class="order-date" style="font-size: 13px; color: #333; margin-bottom: 6px;">æ³¨æ–‡æ—¥æ™‚ï¼š2025-07-03 00:18</div>
                        <div class="client-name" style="font-size: 13px; color: #333; margin-bottom: 6px;">
                            æ³¨æ–‡è€…ï¼š<input type="text" class="text-input customer-name-input" value="ãƒ†ã‚¹ãƒˆé¡§å®¢ï¼ˆæœ€æ–°ç‰ˆï¼‰" style="font-size: 13px; width: calc(100% - 70px); margin-left: 5px; box-sizing: border-box;" />
                        </div>
                        <div class="publication-permission" style="font-size: 13px; color: #333; margin-bottom: 6px; display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                åˆ¶ä½œäº‹ä¾‹æ²è¼‰è¨±å¯ï¼š<select class="publication-permission-select" style="font-size: 13px; margin-left: 5px;">
                                    <option value="ã—ãªã„" selected>ã—ãªã„</option>
                                    <option value="ã™ã‚‹">ã™ã‚‹</option>
                                </select>
                            </div>
                            <button class="edit-btn test-edit-btn-latest" style="
                                background-color: #dc3545 !important;
                                color: white !important;
                                border: 3px solid #000 !important;
                                padding: 8px 16px !important;
                                border-radius: 5px !important;
                                font-size: 15px !important;
                                font-weight: bold !important;
                                cursor: pointer !important;
                                margin-left: 10px !important;
                                flex-shrink: 0 !important;
                                display: inline-block !important;
                                visibility: visible !important;
                                opacity: 1 !important;
                                min-width: 80px !important;
                                text-align: center !important;
                                z-index: 99999 !important;
                                position: relative !important;
                                box-shadow: 0 2px 4px rgba(0,0,0,0.3) !important;
                            ">ãƒ†ã‚¹ãƒˆç·¨é›†</button>
                        </div>
                    </td>
                    <td class="doc-buttons">ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«</td>
                    <td class="process-info">ãƒ†ã‚¹ãƒˆæ‹…å½“</td>
                    <td class="process-info">2025-07-03</td>
                    <td class="process-info">éŠ€è¡ŒæŒ¯è¾¼</td>
                    <td class="process-info">2025-07-03</td>
                    <td class="process-info">2025-07-03</td>
                    <td class="process-info">ãƒ†ã‚¹ãƒˆå·¥å ´</td>
                    <td class="process-info">2025-07-10</td>
                    <td class="process-info">2025-07-05</td>
                    <td class="process-info">ãƒ†ã‚¹ãƒˆç¸«è£½</td>
                    <td class="process-info">2025-07-12</td>
                    <td class="process-info">ãƒ†ã‚¹ãƒˆæ¤œå“</td>
                    <td class="process-info">2025-07-15<br/>ãƒ¤ãƒãƒˆé‹è¼¸</td>
                    <td class="remarks">ãƒ†ã‚¹ãƒˆå‚™è€ƒï¼ˆæœ€æ–°ç‰ˆ - ${new Date().toLocaleString()}ï¼‰</td>
                </tr>
            `;
            
            tbody.innerHTML = testRowHTML;
            console.log('âœ… ãƒ†ã‚¹ãƒˆè¡Œã®HTMLã‚’æŒ¿å…¥ã—ã¾ã—ãŸ');
            
            // ç·¨é›†ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ 
            setTimeout(() => {
                const testBtn = tbody.querySelector('.test-edit-btn-latest');
                if (testBtn) {
                    testBtn.addEventListener('click', function() {
                        console.log('ğŸ‰ ãƒ†ã‚¹ãƒˆç·¨é›†ãƒœã‚¿ãƒ³å‹•ä½œç¢ºèªæˆåŠŸï¼æœ€æ–°ç‰ˆã®ãƒœã‚¿ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚');
                        console.log('âœ… ãƒ†ã‚¹ãƒˆç·¨é›†ãƒœã‚¿ãƒ³æ­£å¸¸å‹•ä½œ - æœ€æ–°ç‰ˆ');
                    });
                    console.log('âœ… ãƒ†ã‚¹ãƒˆè¡Œã¨ç·¨é›†ãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã¾ã—ãŸ - æœ€æ–°ç‰ˆ');
                    
                    // å³åº§ã«çµæœã‚’è¡¨ç¤º
                    const editButtonCount = document.querySelectorAll('.edit-btn').length;
                    console.log(`âœ… ãƒ†ã‚¹ãƒˆè¡Œä½œæˆå®Œäº†ï¼ç·¨é›†ãƒœã‚¿ãƒ³æ•°: ${editButtonCount}å€‹ æ™‚åˆ»: ${new Date().toLocaleString()}`);
                    
                } else {
                    console.error('âŒ ãƒ†ã‚¹ãƒˆç·¨é›†ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                }
            }, 100);
        };
        
        // å¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
        window.emergencyReload = function() {
            console.log('ğŸ”„ ç·Šæ€¥ãƒªãƒ­ãƒ¼ãƒ‰å®Ÿè¡Œ');
            // alert('ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¾ã™...');
            window.location.reload(true);
        };
        
        // CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚¨ãƒ©ãƒ¼è§£æ±ºæ©Ÿèƒ½
        window.debugSelectorErrors = function() {
            console.log('ğŸ” CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚¨ãƒ©ãƒ¼ç›£è¦–é–‹å§‹');
            const rows = document.querySelectorAll('.order-row');
            const problemIds = [];
            
            rows.forEach((row, index) => {
                const orderNumberElement = row.querySelector('.order-number');
                if (orderNumberElement) {
                    const originalId = orderNumberElement.textContent.replace('æ³¨æ–‡IDï¼š', '').trim();
                    
                    // å®‰å…¨ãªIDã‚’ç”Ÿæˆ
                    let safeId = originalId.replace(/^#/, '').replace(/[^a-zA-Z0-9\-_]/g, '_');
                    if (safeId.match(/^[0-9]/)) {
                        safeId = 'id_' + safeId;
                    }
                    if (!safeId) {
                        safeId = 'unknown_id';
                    }
                    
                    const selectorId = `status-${safeId}`;
                    
                    try {
                        const testElement = row.querySelector(`#${selectorId}`);
                        console.log(`âœ… [${index}] æ­£å¸¸: ${originalId} â†’ ${safeId} â†’ #${selectorId}`);
                    } catch (error) {
                        console.error(`âŒ [${index}] ã‚¨ãƒ©ãƒ¼: ${originalId} â†’ ${safeId} â†’ #${selectorId}`, error.message);
                        problemIds.push({
                            index: index,
                            originalId: originalId,
                            safeId: safeId,
                            selectorId: selectorId,
                            error: error.message
                        });
                    }
                }
            });
            
            if (problemIds.length > 0) {
                console.log('ğŸš¨ å•é¡Œã®ã‚ã‚‹IDä¸€è¦§:', problemIds);
                console.warn(`CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚¨ãƒ©ãƒ¼ãŒ${problemIds.length}å€‹è¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§è©³ç´°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`);
            } else {
                console.log('âœ… CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚¨ãƒ©ãƒ¼ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ');
            }
            
            return problemIds;
        };
        
        // ç·Šæ€¥CSSã‚»ãƒ¬ã‚¯ã‚¿ä¿®å¾©æ©Ÿèƒ½ï¼ˆå¼·åŒ–ç‰ˆï¼‰
        window.emergencyFixSelectorErrors = function() {
            console.log('ğŸ†˜ CSSã‚»ãƒ¬ã‚¯ã‚¿ç·Šæ€¥ä¿®å¾©é–‹å§‹ - å¼·åŒ–ç‰ˆ');
            const rows = document.querySelectorAll('.order-row');
            let fixedCount = 0;
            
            // å¼·åŒ–ã•ã‚ŒãŸIDç”Ÿæˆé–¢æ•°ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
            function createSafeId(originalId) {
                try {
                    let safeId = String(originalId || '')
                        .replace(/^#+/, '')           // å…ˆé ­ã®#ã‚’å…¨ã¦å‰Šé™¤
                        .replace(/[^a-zA-Z0-9\-_]/g, '_')  // ç„¡åŠ¹æ–‡å­—ã‚’_ã«ç½®æ›
                        .replace(/_{2,}/g, '_')       // é€£ç¶š_ã‚’å˜ä¸€ã«
                        .replace(/^_+|_+$/g, '');     // å‰å¾Œã®_ã‚’å‰Šé™¤
                    
                    if (!safeId) safeId = 'unknown_id';
                    if (safeId.match(/^[0-9]/)) safeId = 'id_' + safeId;
                    if (!safeId.match(/^[a-zA-Z]/)) safeId = 'id_' + safeId;
                    
                    // æœ€çµ‚æ¤œè¨¼
                    if (!safeId.match(/^[a-zA-Z][a-zA-Z0-9_-]*$/)) {
                        return 'fallback_' + Math.random().toString(36).substring(2, 8);
                    }
                    
                    return safeId.substring(0, 50);
                } catch (error) {
                    return 'error_' + Math.random().toString(36).substring(2, 8);
                }
            }
            
            rows.forEach((row, index) => {
                try {
                    const orderNumberElement = row.querySelector('.order-number');
                    if (orderNumberElement) {
                        const originalId = orderNumberElement.textContent.replace('æ³¨æ–‡IDï¼š', '').trim();
                        const baseSafeId = createSafeId(originalId);
                        
                        // ã™ã¹ã¦ã®å•é¡Œã®ã‚ã‚‹IDè¦ç´ ã‚’ä¿®å¾©
                        const problemElements = row.querySelectorAll('[id*="#"], [id=""], [class*="temp-"]');
                        problemElements.forEach(element => {
                            const currentId = element.id;
                            const currentClass = element.className;
                            
                            // statusè¦ç´ ã®ä¿®å¾©
                            if (currentClass.includes('status-temp-') || currentId.includes('#') || currentId.startsWith('status-') && !currentId.match(/^status-[a-zA-Z][a-zA-Z0-9_-]*$/)) {
                                const newId = `status-${baseSafeId}`;
                                element.id = newId;
                                element.className = currentClass.replace(/status-temp-\d+/, 'status-badge');
                                console.log(`ğŸ”§ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹IDä¿®å¾©: ${currentId} â†’ ${newId}`);
                                fixedCount++;
                            }
                            
                            // ãƒ•ã‚¡ã‚¤ãƒ«é–¢é€£è¦ç´ ã®ä¿®å¾©
                            if (currentClass.includes('quote-btn-temp-') || currentClass.includes('quote-info-temp-')) {
                                element.id = currentClass.includes('btn') ? `quote-btn-${baseSafeId}` : `quote-info-${baseSafeId}`;
                                element.className = currentClass.replace(/quote-(btn|info)-temp-\d+/, 'quote-$1');
                                fixedCount++;
                            }
                            
                            if (currentClass.includes('image-btn-temp-') || currentClass.includes('image-info-temp-')) {
                                element.id = currentClass.includes('btn') ? `image-btn-${baseSafeId}` : `image-info-${baseSafeId}`;
                                element.className = currentClass.replace(/image-(btn|info)-temp-\d+/, 'image-$1');
                                fixedCount++;
                            }
                        });
                    }
                } catch (error) {
                    console.warn(`âš ï¸ è¡Œ ${index} ã®ä¿®å¾©ä¸­ã«ã‚¨ãƒ©ãƒ¼:`, error.message);
                }
            });
            
            console.log(`âœ… CSSã‚»ãƒ¬ã‚¯ã‚¿ç·Šæ€¥ä¿®å¾©å®Œäº†: ${fixedCount}å€‹ã®è¦ç´ ã‚’ä¿®å¾©`);
            console.log(`âœ… CSSã‚»ãƒ¬ã‚¯ã‚¿ç·Šæ€¥ä¿®å¾©å®Œäº† ä¿®å¾©ã•ã‚ŒãŸè¦ç´ æ•°: ${fixedCount}å€‹`);
            // alert(`âœ… CSSã‚»ãƒ¬ã‚¯ã‚¿ç·Šæ€¥ä¿®å¾©å®Œäº†\n\nä¿®å¾©ã•ã‚ŒãŸè¦ç´ æ•°: ${fixedCount}å€‹`);
            return fixedCount;
        };

        console.log('ğŸ†˜ ç·Šæ€¥ä¿®æ­£ã‚³ãƒãƒ³ãƒ‰åˆ©ç”¨å¯èƒ½ï¼ˆæœ€æ–°ç‰ˆ - 2025-01-08 00:22ï¼‰:');
        console.log('- emergencyCheckStatus() - ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ã‚’ç¢ºèª');
        console.log('- emergencyFixEditButtons() - æ—¢å­˜è¡Œã«ç·¨é›†ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ');
        console.log('- emergencyCreateTestRow() - ãƒ†ã‚¹ãƒˆè¡Œã‚’ä½œæˆã—ã¦å‹•ä½œç¢ºèª');
        console.log('- emergencyReload() - ãƒšãƒ¼ã‚¸ã‚’å¼·åˆ¶å†èª­ã¿è¾¼ã¿');
        console.log('- debugSelectorErrors() - CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯');
        console.log('- emergencyFixSelectorErrors() - CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚¨ãƒ©ãƒ¼ã‚’ä¿®å¾©ï¼ˆå¼·åŒ–ç‰ˆï¼‰');
        console.log('');
        console.log('ğŸ“‹ ä½¿ç”¨æ–¹æ³•:');
        console.log('1. ã¾ãš emergencyCheckStatus() ã§ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèª');
        console.log('2. emergencyFixSelectorErrors() ã§CSSã‚¨ãƒ©ãƒ¼ã‚’ä¿®å¾©');
        console.log('3. emergencyFixEditButtons() ã§ç·¨é›†ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ');
        console.log('4. ãƒ†ã‚¹ãƒˆè¡Œã§ç¢ºèªã—ãŸã„å ´åˆã¯ emergencyCreateTestRow() ã‚’å®Ÿè¡Œ');
        
        // ã‚¹ãƒ”ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨CSS
        const authStyle = document.createElement('style');
        authStyle.textContent = `
            @keyframes spin {
                from { transform: rotate(0deg); }
                to { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(authStyle);
        
        // è©³ç´°æ¤œç´¢ãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼åŠ¹æœ
        const detailSearchBtn = document.getElementById('detailSearchBtn');
        if (detailSearchBtn) {
            detailSearchBtn.addEventListener('mouseenter', function() {
                this.style.backgroundColor = '#2980b9';
            });
            detailSearchBtn.addEventListener('mouseleave', function() {
                this.style.backgroundColor = '#3498db';
            });
        }

    </script>
</body>
</html>